//
// Expertinfos Sectoriel theme's newsletter
// v3.0 | 2015-06-23 10:45
// --------------------------------------------------


//Propriétés mso-* utilisées dans Outlook
//Debug outlook : http://www.verticalresponse.com/blog/its-not-you-its-outlook-the-complete-guide-for-email-marketers/

// Débuggage à effectuer :
// - Live Mail							=> OK résolu
// - Lotus Notes 8.5					=> OK résolu
// - Outlook 2003, 2007, 2010, 2013		=> OK résolu
// - Gmail Android						=> OK résolu
// - Gmail IOS7							=> OK résolu
// - Orange.fr Win						=> OK résolu
// - Outlook.com All OS					=> Chiffre, question, rappel : multilines et dimension : vérifier en interne
// - Yahoo Chrome Mac					=> OK résolu
// - Yahoo Chrome Win					=> OK résolu
// - Yahoo Firefox Mac					=> OK résolu
// - Yahoo Firefox Win					=> OK résolu


// LAYOUT
// --------------------------------------------------

h1, h2, h3, h4, h5, h6 { mso-line-height-rule: exactly; }
h1 { line-height: (@headingsFontSizeH1 * 1.1); }
h2 { line-height: (@headingsFontSizeH2 * 1.1); }
h3 { line-height: (@headingsFontSizeH3 * 1.1); }
h4 { line-height: (@headingsFontSizeH4 * 1.1); }
h5 { line-height: (@headingsFontSizeH5 * 1.1); }
h6 { line-height: (@headingsFontSizeH6 * 1.1); }

h1, h2, h3, h4, h5, h6 {
	a { .newsletterLinkColor(@nlHeadings); }
}

.header {
	//suppression décalage en trop
	td.wrapper { padding-top: 0px; }
	table.columns td, table.column td { padding-bottom: 0px; }
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .header {
		td.wrapper { padding-top: 0px !important; }
		table.columns td, table.column td { padding-bottom: 0px !important; }
	}
}

//pour rajouter de l'espace en haut et en dessous des wrappers
.filler {
	&, .empty {
		mso-line-height-rule: exactly;
		line-height: 0px;
		font-size: 0px;
	}
	.empty { margin: 0px; }
}

//sur titres
.preTitle {
	//décalage si précédé
	* + & { padding-top: 10px; }
}

//tous les titres
.title {
	//décalage si précédé
	* + & { padding-top: 5px; }

	//padding de séparation plus important lorsque précédé d'un autre article
	.readMore + & { padding-top: 10px; }

	& + a img { padding-top: 10px; }
}

//tous les container de texte
.text {
	//décalage si précédé
	* + & { padding-top: 5px; }
}

//lien de suivis
.readMore {
	width: 100%;
	-premailer-width: 100%;
	overflow: hidden;
	clear: both;

	table.columns &, table.column & {
		td.buttonWrapper {
			padding-bottom: 0px;
			clear: both;
		}
		table.tiny-button {
			display: table;
			table-layout: auto;
			width: auto;
			-premailer-width: auto;
			float: right;
			td {
				width: auto;
				float: none;
				-premailer-width: auto;
				padding: 4px 8px;
				text-transform: uppercase;
				vertical-align: middle;
				//pour les éventuels paragraphes vides rajoutés par Outlook
				a, p { margin: 0px !important; padding: 0px !important; }
			}
		}
	}
	.text + & {
		table.columns &, table.column & {
			td.buttonWrapper { padding-top: 5px; }
		}
	}
}
a.tiny-button-link {
	padding: 0px;
	margin: 0px;
	line-height: ceil(@buttonFontSizeTiny * 1.33);
	mso-line-height-rule: exactly;
}
table.columns .readMore td.buttonWrapper td, table.column .readMore td.buttonWrapper td {
	//pour Outlook
	&, p.MsoNormal {
		line-height: ceil(@buttonFontSizeTiny * 1.33) !important;
		mso-line-height-rule: exactly;
		margin: 0px;
	}
	p.MsoNormal { padding: 0px; }
}
a.tiny-button-link, table.columns .readMore td.buttonWrapper td, table.column .readMore td.buttonWrapper td {
	font-size: @buttonFontSizeTiny;
	font-weight: normal;
}

@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] {
		table.columns, table.column {
			.readMore {
				td.buttonWrapper { padding-bottom: 0px !important; }
				table.tiny-button {
					display: table !important;
					table-layout: auto !important;
					width: auto !important;
					td {
						width: auto !important;
						padding: 4px 8px !important;
					}
				}
			}
		}
		a.tiny-button-link, table.columns .readMore td.buttonWrapper td, table.column .readMore td.buttonWrapper td {
			font-size: @buttonFontSizeTiny !important;
			line-height: ceil(@buttonFontSizeTiny * 1.33) !important;
		}
	}
}


//gestion row avec bordures de séparation
.row.bordered {
	//suppression décalage en trop
	td.wrapper { padding-top: 0px; }
	table.columns td, table.column td { padding-bottom: 0px; }
	td {
		line-height: 0px;
		hr.border {
			margin: 0px;
			//débuggage bordure pour PostaNova
			background-color: transparent;
			height: 0px;
			-premailer-border: none;
		}
	}
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .row.bordered {
		td.wrapper { padding-top: 0px !important; }
		table.columns td, table.column td { padding-bottom: 0px !important; }
	}
}


//réseaux sociaux
.faicons {
	vertical-align: bottom;
	td { text-align: right; }
}
.faicon {
	display: inline;
	//pour supprimer les espaces
	font-size: 0px;
	mso-line-height-rule: exactly;
	line-height: 0px;
	padding: 0px 5px 5px 5px;
	&.first { padding-left: 0px; }
	&.last { padding-right: 0px; }
	img, img& {
		display: inline;
		float: none;
		-premailer-float: none;
	}
	img& {
		padding: 2px;
		vertical-align: top;
	}
}

@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] {
		.faicons { vertical-align: baseline !important; }
		.faicon img, img.faicon {
			width: 15px !important;
			height: 15px !important;
		}
	}
}


// contentOnline area
// -------------------------
.contentOnline {
	//réduction décalage vertical en haut
	td.wrapper { padding-top: (@wrapperPad / 2); }
	table.columns td, table.column td { padding-bottom: (@columnPad / 2); }

	//suppression fontSize et lineHeight pour débug Outlook
	table.columns td, table.column td {
		mso-line-height-rule: exactly;
		line-height: 0px;
		font-size: 0px;
	}

	//remise en place taille texte directement sur éléments
	.online, .name {
		mso-line-height-rule: exactly;
		line-height: @baseLineHeight;
		font-size: @baseFontSize;
	}

	.online {
		display: block;
		padding-bottom: 5px;
	}
	.name { display: block; }
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .contentOnline {
		td.wrapper { padding-top: (@wrapperPadCollapse / 2) !important; }
		table.columns td, table.column td { padding-bottom: (@columnPadCollapse / 2) !important; }
		.online { padding-bottom: 0px !important; }

		//pour forcer centrage contenu trop petit
		.columns, .column { display: table !important; }
	}
}


// contentSecteur area
// -------------------------
.contentSecteur {
	.newsletterInnerTextColor(#ffffff);
	&, td.expander { -premailer-background: e("**((secteur_color))**"); }

	//pour l'affichage des tests
	.contentSecteur-loop(@list, @index: 1) when (@index <= length(@list)) {
		//extraction du motif
		@testa-motif: extract(@list, @index);
		//extraction de la couleur
		@testa-color: ~"secteur-section-color-@{testa-motif}";
		&.secteur-@{testa-motif} { &, td.expander { background-color: @@testa-color; } }
		//boucle suivante
		.contentSecteur-loop(@list, (@index + 1));
	}
	.contentSecteur-loop(@secteur-section-motifs);

	//changement padding vertical
	table.columns td, table.column td { padding-bottom: (@columnPad / 2); }

	td {
		font-weight: normal;
		font-weight: 200;
		font-size: (@wrapperPad * 2);
		line-height: (@wrapperPad * 2);
		.secteur {
			font-weight: bold;
			font-weight: 600;
			text-transform: uppercase;
			word-break: keep-all;
			white-space: nowrap;
			.slash { margin: 0 -.25em; }
		}
	}
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .contentSecteur {
		table.columns td, table.column td { padding-bottom: (@columnPadCollapse / 2) !important; }

		td {
			font-size: (@wrapperPadCollapse * 3) !important;
			line-height: (@wrapperPadCollapse * 3) !important;
			text-align: left !important;

			.essentiel { display: block !important; }
			.secteur {
				word-break: normal !important;
				white-space: normal !important;
				display: block !important;
				text-align: right;
			}
		}
	}
}


// contentDateInfo area
// -------------------------
.contentDateInfo {
	//réduction décalage vertical en haut
	td.wrapper { padding-top: (@wrapperPad / 2); }
	table.columns td, table.column td { padding-bottom: (@columnPad / 2); }

	.info {
		td { text-transform: uppercase; }
	}
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .contentDateInfo {
		td.wrapper { padding-top: (@wrapperPadCollapse / 2) !important; }
		table.columns td, table.column td { padding-bottom: (@columnPadCollapse / 2) !important; }
	}
}


// contentALaUne area
// -------------------------
.contentALaUne {
	.preTitle { padding-bottom: 5px; }
}

// contentEtudeMarche area
// -------------------------
.contentEtudeMarche {
	background-color: #0f0;
	table.inner, table.image, table.content {
		width: 100%;
		-premailer-width: 100%;
	}
	table.inner td, table.content td {
		padding-top: (@wrapperPad / 2);
		padding-bottom: (@columnPad / 2);
	}
	table.inner {
		background-color: #f00;
		td { vertical-align: middle; }
	}
	table.content {
		background-color: #00f;
		.title { text-align: center; }
	}
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .contentEtudeMarche {
		//voir pour mise en place pleine couleur en mode mobile
		td.sub-columns {
			width: auto !important;
			&.first { min-width: 50px !important; }
		}
		td.wrapper, table.inner, table.image, table.content {
			width: 100% !important;
		}
		table.inner td, table.content td {
			padding-top: (@wrapperPadCollapse / 2) !important;
			padding-bottom: (@columnPadCollapse / 2) !important;
		}
	}
}


// contentEtude area
// -------------------------
.contentEtude {
	//pour rajouter de l'espace en haut et en dessous des wrappers
	.filler {
		height: @wrapperPad;
		-premailer-height: @wrapperPad;
	}

	// .wrapper:nth-child(odd) {
	// 	background-color: #00f;
	// }
	// .wrapper:nth-child(even) {
	// 	background-color: #00a;
	// }

	.value, .text, .source {
		width: 100%;
		-premailer-width: 100%;
	}

	.value {
		// background-color: #f00;
		td {
			font-size: @etudeFontSize;
			line-height: @etudeFontSize;
			font-weight: normal;
			font-weight: 500;
		}
	}

	.text {
		// background-color: #0f0;
		td { padding-top: 5px; }
	}

	.source {
		// background-color: #00f;
		td {
			padding-top: 5px;
			font-size: @fontSizeSmall;
			line-height: floor(@fontSizeSmall * 1.33);
			font-style: italic;
		}
	}

	//suppression padding vertical
	table.columns td, table.column td { padding-bottom: 0px; }
	.wrapper {
		padding-top: 0px;

		//rajout bordures verticales
		&:not(.first) {
			//réduction largeur tableau 6 colonnes de 1px pour compenser
			.columns.four { width: (3 * @gutterWidth + 4 * @columnWidth - 1px); }
		}
	}
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .contentEtude {
		//masquage des fillers
		.filler {
			height: 0px !important;
			display: none !important;
			visibility: hidden !important;
		}

		//rajout bordures horizontales
		table.columns td, table.column td { padding-bottom: (@columnPadCollapse - 1px) !important; }

		//pas de sélecteur :not car il n'est pas géré partout et le style mobile n'est pas inliné
		.wrapper {
			border-left: 0px !important;

			//déplacement du padding sur les wrappers
			.text-pad {
				padding-left: 0px !important;
				padding-right: 0px !important;
			}
			padding-left: @textPadCollapse !important;
			padding-right: @textPadCollapse !important;

			//suppression bordure sur le dernier
			&.last {
				table.columns td, table.column td {
					padding-bottom: @columnPadCollapse !important;
					border-bottom: 0px !important;
				}
			}

			//alignement du texte
			td {
				text-align: left !important;
				vertical-align: middle !important;
			}

			//suppression padding
			table.columns, table.column {
				.value td { padding: 0px !important; }
				.text td { padding: (@etudeFontSize - @baseLineHeight - @baseFontSize / 2) 0 0 10px !important; }
				.source td { padding: 2.5px 0 0 0 !important; }
				.value, .text {
					td { border-bottom: 0px !important; }
				}
			}
		}

		//déplacement du titre à droite de la valeur
		.value, .text {
			width: auto !important;
			vertical-align: bottom !important;
			max-width: 50% !important;
		}
		.value {
			display: block !important;
			float: left !important;
		}
	}
}


// contentContact area
// -------------------------
.contentContact {
	//réduction décalage vertical en bas
	table.columns td, table.column td { padding-bottom: (@columnPad / 2); }
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .contentOnline {
		table.columns td, table.column td { padding-bottom: (@columnPadCollapse / 2) !important; }
	}
}


// footer area
// -------------------------
.footer {
	//réduction décalage vertical en haut
	td.wrapper { padding-top: (@wrapperPad / 2); }
	table.columns td, table.column td { padding-bottom: (@columnPad / 2); }
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .contentOnline {
		td.wrapper { padding-top: (@wrapperPadCollapse / 2) !important; }
		table.columns td, table.column td { padding-bottom: (@columnPadCollapse / 2) !important; }
	}
}


// DEFAULT COLORS
// --------------------------------------------------
//couleurs de la newsletter figée, donc on reste sur des couleurs fixes

// Main container
// -------------------------
.container { background-color: @nlContainerBackground; }

// Typography
// -------------------------
body, table.body, h1, h2, h3, h4, h5, h6, p, td {
	color: @nlText;
}

// Links
// -------------------------
a {
	//LoVe's Hurts Fade Away (LVHFA)
	&, h1 &, h2 &, h3 &, h4 &, h5 &, h6 &, .appleLinks & {
		color: @nlLinkColor;
		.important { color: @nlLinkColor !important; }
		&:visited { &, .important { color: @nlLinkColor !important; } }
		&:hover { &, .important { color: @nlLinkColorHover !important; } }
		&:focus { &, .important { color: @nlLinkColorHover !important; } }
		&:active { &, .important { color: @nlLinkColor !important; } }
	}
}

// Sur-titres
// -------------------------
.preTitle {
	color: @nlPreTitle;
	a { .newsletterLinkColor(@nlPreTitle); }
}

// contentDateInfo area
// -------------------------
.contentDateInfo {
	.date {
		&, td.expander { background: @nlCntDtiDateBackground; }
		.newsletterInnerTextColor(@nlCntDtiDateText);
	}
	.info {
		&, td.expander { background: @nlCntDtiInfoBackground; }
		.newsletterInnerTextColor(@nlCntDtiInfoText);
	}
}

// contentCabInform area
// -------------------------
.contentCabInform {
	&, td.expander { background: @nlCntCabBackground; }
	.title {
		color: @nlCntCabTitle;
		a { .newsletterLinkColor(@nlCntCabTitle); }
	}
	.text, .readMore {
		color: @nlCntCabText;
		.important { color: @nlCntCabText !important; }
	}
	.newsletterInnerTextColor(@nlCntCabText);
	.readMore table.tiny-button {
		td {
			background: @nlCntCabReadMoreBackground;
			border-color: @nlCntCabReadMoreBorder;
			&, a {
				color: @nlCntCabReadMoreText;
				.important { color: @nlCntCabReadMoreText !important; }
			}
		}

		//hover|visited|active state
		&:hover td,
		&:visited td,
		&:active td {
			background: @nlCntCabReadMoreBackgroundHover !important;
			a {
				&, .important { color: @nlCntCabReadMoreText !important; }
			}
		}
		td a:visited {
			&, .important { color: @nlCntCabReadMoreText !important; }
		}
	}
}

// contentALaUne area
// -------------------------
.contentALaUne {
	.readMore table.tiny-button {
		td {
			&, a {
				color: @nlCntUneReadMoreText;
				.important { color: @nlCntUneReadMoreText !important; }
			}
		}

		//hover|visited|active state
		&:hover td,
		&:visited td,
		&:active td {
			a {
				&, .important { color: @nlCntUneReadMoreText !important; }
			}
		}
		td a:visited {
			&, .important { color: @nlCntUneReadMoreText !important; }
		}
	}
}

// contentArticles area
// -------------------------
.contentArticles {
	&, td.expander { background: @nlCntArtBackground; }
	.readMore table.tiny-button {
		td {
			background: @nlCntArtReadMoreBackground;
			border-color: @nlCntArtReadMoreBorder;
			&, a {
				color: @nlCntArtReadMoreText;
				.important { color: @nlCntArtReadMoreText !important; }
			}
		}

		//hover|visited|active state
		&:hover td,
		&:visited td,
		&:active td {
			background: @nlCntArtReadMoreBackgroundHover !important;
			a {
				&, .important { color: @nlCntArtReadMoreText !important; }
			}
		}
		td a:visited {
			&, .important { color: @nlCntArtReadMoreText !important; }
		}
	}
}

// contentEtude area
// -------------------------
.contentEtude {
	&, td.expander { background: @nlCntEtuBackground; }
	.newsletterInnerTextColor(@nlCntEtuText);
	.text {
		&, td {
			color: mix(@nlCntEtuBackground, @nlCntEtuText, 10%);
			.important { color: mix(@nlCntEtuBackground, @nlCntEtuText, 10%) !important; }
		}
	}
	.source {
		&, td {
			color: mix(@nlCntEtuBackground, @nlCntEtuText, 25%);
			.important { color: mix(@nlCntEtuBackground, @nlCntEtuText, 25%) !important; }
		}
	}
}

// contentContact area
// -------------------------
.contentContact {
	&, td.expander { background: @nlCntCctBackground; }
	.newsletterInnerTextColor(@nlCntCctText);
}


// footer area
// -------------------------
.footer {
	&, td.expander { background: @nlFooterBackground; }
	.newsletterInnerTextColor(@nlFooterText);
	small { color: @nlFooterText; }
}


// CUSTOM COLORS
// --------------------------------------------------

// Body
// -------------------------
body, table.body {
	-premailer-background: e("##((nlSecBodyBackground))##");
	//rajout pour suppression paramètre doublon via compiler
	background-image: url("-premailer-bgdebug");
}


// Header
// -------------------------
//pour supprimer toute zone blanche avant chargement header
.header { -premailer-background: e("##((nlSecBodyBackground))##"); }


// contentOnline area
// -------------------------
.contentOnline {
	&, td.expander { -premailer-background: e("##((nlSecCntOnlineBackground))##"); }
	.newsletterInnerTextColor(e("##((nlSecCntOnlineText))##"));
	.online {
		color: e("##((nlSecCntOnlineText))##");
		a { .newsletterLinkColor(e("##((nlSecCntOnlineText))##")); }
	}
	.name {
		color: e("##((nlSecCntOnlineName))##");
		a { .newsletterLinkColor(e("##((nlSecCntOnlineName))##")); }
	}
}


// Sur-titres
// -------------------------
.preTitle .last {
	color: e("**((secteur_color))**");
	a { .newsletterLinkColor(e("**((secteur_color))**")); }
}


// Hr borders
// -------------------------
hr {
	color: e("**((secteur_color))**");
	background: e("**((secteur_color))**");
}
//gestion row avec bordures de séparation
.row.bordered {
	td hr.border {
		-premailer-border-bottom: 1px solid e("**((secteur_color))**");
		//rajout pour suppression paramètre doublon via compiler
		border: 999000999ex none transparent;
	}
}


// contentALaUne area
// -------------------------
.contentALaUne {
	.readMore table.tiny-button {
		td {
			-premailer-background: e("**((secteur_color))**");
			-premailer-border: 1px solid e("**((secteur_color_darken12))**");
			//rajout pour suppression paramètre doublon via compiler
			background-image: url("-premailer-bgdebug");
			border: 999000999ex none transparent;
		}

		//hover|visited|active state
		&:hover td,
		&:visited td,
		&:active td {
			background: e("**((secteur_color_darken10))**") !important;
		}
	}
}


// contentEtude area
// -------------------------
.contentEtude {
	.wrapper:not(.first) {
		-premailer-border-left: 1px solid e("**((secteur_color))**");
		//rajout pour suppression paramètre doublon via compiler
		border: 999000999ex none transparent;
	}
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .contentEtude {
		table.columns td, table.column td { border-bottom: 1px solid e("**((secteur_color))**") !important; }
	}
}

/*
// DEVELOPPEMENT COLORS
// --------------------------------------------------


// Body
// -------------------------
body, table.body {
	background: @nlSecBodyBackground;
	//rajout pour suppression paramètre doublon via compiler
	// background-image: url("-premailer-bgdebug");
}


// Header
// -------------------------
//pour supprimer toute zone blanche avant chargement header
.header { background: @nlSecBodyBackground; }


// contentOnline area
// -------------------------
.contentOnline {
	&, td.expander { background: @nlSecCntOnlineBackground; }
	.newsletterInnerTextColor(@nlSecCntOnlineText);
	.online {
		color: @nlSecCntOnlineText;
		a { .newsletterLinkColor(@nlSecCntOnlineText); }
	}
	.name {
		color: @nlSecCntOnlineName;
		a { .newsletterLinkColor(@nlSecCntOnlineName); }
	}
}


// Sur-titres
// -------------------------
.preTitle .last {
	color: @nlPreTitleLast;
	a { .newsletterLinkColor(@nlPreTitleLast); }
}


// Hr borders
// -------------------------
hr {
	color: @nlHrBorder;
	background: @nlHrBorder;
}
//gestion row avec bordures de séparation
.row.bordered {
	td hr.border { border-bottom: 1px solid @nlHrBorder; }
}


// contentALaUne area
// -------------------------
.contentALaUne {
	.readMore table.tiny-button {
		td {
			background: @nlCntUneReadMoreBackground;
			border: 1px solid @nlCntUneReadMoreBorder;
		}

		//hover|visited|active state
		&:hover td,
		&:visited td,
		&:active td {
			background: @nlCntUneReadMoreBackgroundHover !important;
		}
	}
}


// contentEtude area
// -------------------------
.contentEtude {
	.wrapper:not(.first) { border-left: 1px solid @nlCntEtuBorder; }
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .contentEtude {
		table.columns td, table.column td { border-bottom: 1px solid @nlCntEtuBorder !important; }
	}
}
*/